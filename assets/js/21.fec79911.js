(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{264:function(e,a,t){"use strict";t.r(a);var n=t(2),s=function(e){e.options.__data__block__={mermaid_382ee16d:"sequenceDiagram;\n    participant User;\n    participant Native Dapp;\n\tparticipant NewPay;\n\tparticipant HEP API;\n\n    User->>Native Dapp: Click 'Pay with NewPay';\n\tNative Dapp->>NewPay: Send public key + order info;\n\tNewPay->>HEP API: Send public key;\n\tHEP API->>NewPay: Send Dapp info;\n\tNewPay->> User: Prompt: authorize payment;\n\tUser->>NewPay: Type password + authorize;\n\tNewPay->>HEP API: Request payment;\nloop FundsTransfer;\n        HEP API->>HEP API: Transfer payment;\n\tend;\n\tHEP API->>NewPay: Send receipt;\n\tNewPay->>User: Send receipt;\n\tNewPay->>Native Dapp: Send receipt;\n\tNewPay--\x3e>Native Dapp: Send user back;\n",mermaid_382ee242:"sequenceDiagram;\n    participant User;\n    participant Website;\n\tparticipant NewPay;\n\tparticipant HEP API;\n\n    User->>Website: Click 'Pay with NewPay';\n\tWebsite->>User: Display QR code;\n\tUser--\x3e>NewPay: Open NewPay;\n\tUser->>NewPay: Scan QR code;\n\tNewPay->>HEP API: Send public key;\n\tHEP API->>NewPay: Send website info;\n\tNewPay->> User: Prompt: authorize payment;\n\tUser->>NewPay: Type password + authorize;\n\tNewPay->>HEP API: Request payment;\nloop FundsTransfer;\n        HEP API->>HEP API: Transfer payment;\n\tend;\n\tHEP API->>NewPay: Send receipt;\n\tNewPay->>User: Send receipt;\n\tNewPay->>Website: Send receipt;\n",mermaid_64a56f36:"\nsequenceDiagram;\n    participant User;\n    participant Dapp;\n\tparticipant NewPay;\n\tparticipant HEP API;\n\n    User->>Dapp: Click 'Pay with NewPay';\n\tDapp->>NewPay: Send public key + order info;\n\tNewPay->>HEP API: Send public key;\n\tHEP API->>NewPay: Send Dapp info;\n\tNewPay->> User: Prompt: authorize payment;\n\tUser->>NewPay: Type password + authorize;\n\tNewPay->>HEP API: Request payment;\nloop FundsTransfer;\n        HEP API->>HEP API: Transfer payment;\n\tend;\n\tHEP API->>NewPay: Send receipt;\n\tNewPay->>User: Send receipt;\n\tNewPay->>Dapp: Send receipt;\n\tNewPay--\x3e>Dapp: Send user back;\n"}},r=Object(n.a)({},(function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("h1",{attrs:{id:"newpay-payment-process"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#newpay-payment-process"}},[e._v("#")]),e._v(" NewPay Payment Process")]),e._v(" "),t("h2",{attrs:{id:"preconditions"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#preconditions"}},[e._v("#")]),e._v(" Preconditions")]),e._v(" "),t("ul",[t("li",[e._v("User has NewPay installed on their device and has set a NewID")]),e._v(" "),t("li",[e._v("The Dapp or website requesting payment has "),t("RouterLink",{attrs:{to:"/flow/register_service.html"}},[e._v("registered on Newton's platform")])],1),e._v(" "),t("li",[e._v("User is already logged in to native dapp/website/dapp-in-dapp with their NewID")])]),e._v(" "),t("h2",{attrs:{id:"the-payment-process"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#the-payment-process"}},[e._v("#")]),e._v(" The Payment Process")]),e._v(" "),t("h2",{attrs:{id:"native-dapp"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#native-dapp"}},[e._v("#")]),e._v(" Native Dapp")]),e._v(" "),t("Mermaid",{attrs:{id:"mermaid_382ee16d",graph:e.$dataBlock.mermaid_382ee16d}}),t("h3",{attrs:{id:"dapp-requests-user-payment"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#dapp-requests-user-payment"}},[e._v("#")]),e._v(" Dapp requests user payment")]),e._v(" "),t("ol",[t("li",[e._v("Dapp displays "),t("strong",[e._v("Pay with NewID")]),e._v(" button")]),e._v(" "),t("li",[e._v("User taps button")])]),e._v(" "),t("ul",[t("li",[e._v("See [newpay.native.payment.requestPayment]")])]),e._v(" "),t("h3",{attrs:{id:"user-authorizes-payment-on-newpay"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#user-authorizes-payment-on-newpay"}},[e._v("#")]),e._v(" User authorizes payment on NewPay")]),e._v(" "),t("ol",[t("li",[e._v("NewPay gets public key of Dapp and order information through [signature] and [message] parameters")]),e._v(" "),t("li",[e._v("NewPay sends public key to [HEP API]")]),e._v(" "),t("li",[e._v("HEP API uses public key to request app information that was registered in database and sends that information back to NewPay")]),e._v(" "),t("li",[e._v("NewPay opens and prompts user to authorize the payment based on information gathered from HEP API")]),e._v(" "),t("li",[e._v("User confirms payment")]),e._v(" "),t("li",[e._v("Payment receipt is sent to user and Dapp")]),e._v(" "),t("li",[e._v("User is redirected back to Dapp")])]),e._v(" "),t("h2",{attrs:{id:"website"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#website"}},[e._v("#")]),e._v(" Website")]),e._v(" "),t("Mermaid",{attrs:{id:"mermaid_382ee242",graph:e.$dataBlock.mermaid_382ee242}}),t("h3",{attrs:{id:"website-requests-user-payment"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#website-requests-user-payment"}},[e._v("#")]),e._v(" Website requests user payment")]),e._v(" "),t("ol",[t("li",[e._v("Website displays "),t("em",[e._v("Pay with NewID")]),e._v(" button")]),e._v(" "),t("li",[e._v("User clicks or taps button")]),e._v(" "),t("li",[e._v("If on mobile, user is redirected to NewPay. Otherwise, website pops up a QR code for user to scan, containing [order information], [website signature] and [message]")])]),e._v(" "),t("ul",[t("li",[e._v("See [newpay.web.payment.requestAccess]")])]),e._v(" "),t("h3",{attrs:{id:"user-authorizes-payment-on-newpay-2"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#user-authorizes-payment-on-newpay-2"}},[e._v("#")]),e._v(" User authorizes payment on NewPay")]),e._v(" "),t("ol",[t("li",[e._v("NewPay gets public key of website through [signature] and [message] parameters")]),e._v(" "),t("li",[e._v("NewPay sends public key to [HEP API]")]),e._v(" "),t("li",[e._v("HEP API uses public key to request website information that was registered in database and order information, and sends that information back to NewPay")]),e._v(" "),t("li",[e._v("NewPay opens and prompts user to authorize the payment based on information gathered from HEP API")]),e._v(" "),t("li",[e._v("User confirms payment")]),e._v(" "),t("li",[e._v("User's NewID is sent to website, with [message] and [signature]")]),e._v(" "),t("li",[e._v("Payment receipt is sent to user and website")]),e._v(" "),t("li",[e._v("User is redirected back to website")])]),e._v(" "),t("h2",{attrs:{id:"dapp-in-dapp"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#dapp-in-dapp"}},[e._v("#")]),e._v(" Dapp-in-Dapp")]),e._v(" "),t("Mermaid",{attrs:{id:"mermaid_64a56f36",graph:e.$dataBlock.mermaid_64a56f36}})],1)}),[],!1,null,null,null);"function"==typeof s&&s(r);a.default=r.exports}}]);