(window.webpackJsonp=window.webpackJsonp||[]).push([[29],{282:function(t,e,a){"use strict";a.r(e);var r=a(2),s=Object(r.a)({},(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"dweb-newpay-interaction-specification"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#dweb-newpay-interaction-specification"}},[t._v("#")]),t._v(" DWeb - NewPay Interaction Specification")]),t._v(" "),a("h2",{attrs:{id:"basic-parameters"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#basic-parameters"}},[t._v("#")]),t._v(" Basic Parameters")]),t._v(" "),a("h3",{attrs:{id:"request"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#request"}},[t._v("#")]),t._v(" Request")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("Field")]),t._v(" "),a("th",[t._v("Type")]),t._v(" "),a("th",[t._v("Notes")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("dapp_id")]),t._v(" "),a("td",[t._v("string")]),t._v(" "),a("td",[t._v("Decentralized Application Id")])]),t._v(" "),a("tr",[a("td",[t._v("protocol")]),t._v(" "),a("td",[t._v("string")]),t._v(" "),a("td",[t._v('protocol name. The default is "HEP".')])]),t._v(" "),a("tr",[a("td",[t._v("version")]),t._v(" "),a("td",[t._v("string")]),t._v(" "),a("td",[t._v('protocol version. The example is "1.0".')])]),t._v(" "),a("tr",[a("td",[t._v("ts")]),t._v(" "),a("td",[t._v("string")]),t._v(" "),a("td",[t._v("timestamp")])]),t._v(" "),a("tr",[a("td",[t._v("nonce")]),t._v(" "),a("td",[t._v("string")]),t._v(" "),a("td",[t._v("random string or auto-increment sequence")])]),t._v(" "),a("tr",[a("td",[t._v("environment")]),t._v(" "),a("td",[t._v("int")]),t._v(" "),a("td",[t._v("Environment of NewPay. 1 for release, 2 for testnet, 3 for dev")])]),t._v(" "),a("tr",[a("td",[t._v("language")]),t._v(" "),a("td",[t._v("string")]),t._v(" "),a("td",[t._v("The language of DWeb app. choices:zh_CN,en")])])])]),t._v(" "),a("h3",{attrs:{id:"response"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#response"}},[t._v("#")]),t._v(" Response")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("Field")]),t._v(" "),a("th",[t._v("Type")]),t._v(" "),a("th",[t._v("Notes")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("status_code")]),t._v(" "),a("td",[t._v("int")]),t._v(" "),a("td",[t._v("The status code.")])]),t._v(" "),a("tr",[a("td",[t._v("message")]),t._v(" "),a("td",[t._v("string")]),t._v(" "),a("td",[t._v("The error message, support i18n.")])]),t._v(" "),a("tr",[a("td",[t._v("errors")]),t._v(" "),a("td",[t._v("json")]),t._v(" "),a("td",[t._v("The error list, see "),a("a",{attrs:{href:"schema/error.json"}},[t._v("error.json")])])]),t._v(" "),a("tr",[a("td",[t._v("result")]),t._v(" "),a("td",[t._v("json")]),t._v(" "),a("td",[t._v("The result")])])])]),t._v(" "),a("h2",{attrs:{id:"authentication"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#authentication"}},[t._v("#")]),t._v(" Authentication")]),t._v(" "),a("h3",{attrs:{id:"steps"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#steps"}},[t._v("#")]),t._v(" Steps")]),t._v(" "),a("h4",{attrs:{id:"in-desktop-browser"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#in-desktop-browser"}},[t._v("#")]),t._v(" In Desktop Browser")]),t._v(" "),a("ul",[a("li",[t._v("DWeb app generates the QR code by "),a("strong",[t._v("hep.js")]),t._v(" in which basic parameters and extra parameters, such as scope, memo, sign_type and signature, is encoded.")]),t._v(" "),a("li",[t._v("NewPay Scan the QR code, and retrieve the dapp profile from hep node and verify the DWeb app info.")]),t._v(" "),a("li",[t._v("NewPay authorizes Login.")]),t._v(" "),a("li",[t._v("NewPay sends profile back to the API of DWeb app.")])]),t._v(" "),a("h4",{attrs:{id:"in-mobile-browser"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#in-mobile-browser"}},[t._v("#")]),t._v(" In Mobile Browser")]),t._v(" "),a("ul",[a("li",[t._v("DWeb app generates the redirect schema by "),a("strong",[t._v("hep.js")]),t._v(" in which basic parameters and extra parameters, such as scope, memo, sign_type and signature, is encoded. Users click the NewID-Login button, and redirect to NewPay. If NewPay is not installed, redirect to NewPay download page.")]),t._v(" "),a("li",[t._v("NewPay received the input parameters from schema, and retrieve the dapp profile from hep node and verify the DWeb app info.")]),t._v(" "),a("li",[t._v("NewPay authorizes Login.")]),t._v(" "),a("li",[t._v("NewPay sends profile back to the API of DWeb app.")])]),t._v(" "),a("h4",{attrs:{id:"in-newpay"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#in-newpay"}},[t._v("#")]),t._v(" In NewPay")]),t._v(" "),a("ul",[a("li",[t._v("Users click the NewID-Login button. DWeb app call the "),a("strong",[t._v("login")]),t._v(" function by "),a("strong",[t._v("hep.js")]),t._v(" in which basic parameters and extra parameters, such as scope, memo, sign_type and signature, is encoded.")]),t._v(" "),a("li",[t._v("NewPay received the input parameters from "),a("strong",[t._v("JS-bridge")]),t._v(", and retrieve the dapp profile from hep node and verify the DWeb app info.")]),t._v(" "),a("li",[t._v("NewPay authorizes Login.")]),t._v(" "),a("li",[t._v("NewPay sends profile back to the API of DWeb app.")])]),t._v(" "),a("h3",{attrs:{id:"dweb-newpay"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#dweb-newpay"}},[t._v("#")]),t._v(" DWeb -> NewPay")]),t._v(" "),a("h4",{attrs:{id:"parameters"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#parameters"}},[t._v("#")]),t._v(" Parameters")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("Field")]),t._v(" "),a("th",[t._v("Type")]),t._v(" "),a("th",[t._v("Notes")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("uuid")]),t._v(" "),a("td",[t._v("string")]),t._v(" "),a("td",[t._v("The request uuid")])]),t._v(" "),a("tr",[a("td",[t._v("action")]),t._v(" "),a("td",[t._v("string")]),t._v(" "),a("td",[t._v('The value is "hep.auth.login"')])]),t._v(" "),a("tr",[a("td",[t._v("scope")]),t._v(" "),a("td",[t._v("int")]),t._v(" "),a("td",[t._v("profile type Id. 1: base profile including name,head,newid; 2: advance profile including cellphone")])]),t._v(" "),a("tr",[a("td",[t._v("memo")]),t._v(" "),a("td",[t._v("string")]),t._v(" "),a("td",[t._v("Login Memo,optional")])]),t._v(" "),a("tr",[a("td",[t._v("sign_type")]),t._v(" "),a("td",[t._v("string")]),t._v(" "),a("td",[t._v("Signature Type,aka cryptographic algorithm")])]),t._v(" "),a("tr",[a("td",[t._v("signature")]),t._v(" "),a("td",[t._v("string")]),t._v(" "),a("td",[t._v("signature hex string by DApp owner.")])])])]),t._v(" "),a("h3",{attrs:{id:"newpay-return-to-dweb-app-or-server"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#newpay-return-to-dweb-app-or-server"}},[t._v("#")]),t._v(" NewPay return to DWeb app or server")]),t._v(" "),a("ul",[a("li",[t._v("Request")])]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",{staticStyle:{"text-align":"center"}},[t._v("Field")]),t._v(" "),a("th",{staticStyle:{"text-align":"center"}},[t._v("Type")]),t._v(" "),a("th",{staticStyle:{"text-align":"center"}},[t._v("Desc")])])]),t._v(" "),a("tbody",[a("tr",[a("td",{staticStyle:{"text-align":"center"}},[t._v("signature")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("string")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("The profile's signature")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}},[t._v("sign_type")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("string")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("secp256r1, signature method name")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}},[t._v("uuid")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("string")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("uuid")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}},[t._v("name")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("string")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("user's name")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}},[t._v("avatar")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("string")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("user's avatar path")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}},[t._v("newid")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("string")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("user's newid")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}},[t._v("country_code")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("string")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("eg: 86 scope=2")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}},[t._v("cellphone")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("string")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("user's cellphone, scope =2")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}},[t._v("address")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("string")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("user's address, scope=2")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}},[t._v("invite_code")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("string")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("user's invite code,scope=2")])])])]),t._v(" "),a("ul",[a("li",[t._v("Response\nsee "),a("RouterLink",{attrs:{to:"/interact-specification/DWeb-callback-error-messages.html"}},[t._v("Error Message")])],1)]),t._v(" "),a("h4",{attrs:{id:"example"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#example"}},[t._v("#")]),t._v(" Example")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v('{\n    "signature": "0x...",\n    "sign_type": "secp256r1",\n    "uuid": "xxx",\n    "name": "name",\n    "avatar": "avatar path",\n    "newid": "NEWID182...",\n    "country_code": "86",\n    "cellphone": "1888888888",\n    "address": "NEW...",\n    "invite_code": "123456"\n}\n')])])]),a("h2",{attrs:{id:"payment"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#payment"}},[t._v("#")]),t._v(" Payment")]),t._v(" "),a("h3",{attrs:{id:"steps-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#steps-2"}},[t._v("#")]),t._v(" Steps")]),t._v(" "),a("h4",{attrs:{id:"in-desktop-browser-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#in-desktop-browser-2"}},[t._v("#")]),t._v(" In Desktop Browser")]),t._v(" "),a("ul",[a("li",[t._v("DWeb app generates the QR code by "),a("strong",[t._v("hep.js")]),t._v(" in which basic parameters and extra parameters, such as description, price_currency, total_price, order_number, seller, customer, broker, signature, is encoded.")]),t._v(" "),a("li",[t._v("NewPay Scan the QR code, and retrieve the dapp profile from hep node and verify the DWeb app info.")]),t._v(" "),a("li",[t._v("NewPay authorizes payment.")]),t._v(" "),a("li",[t._v("NewPay jump back to DWeb app.")])]),t._v(" "),a("h4",{attrs:{id:"in-mobile-browser-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#in-mobile-browser-2"}},[t._v("#")]),t._v(" In Mobile Browser")]),t._v(" "),a("ul",[a("li",[t._v("DWeb app generates the redirect schema by "),a("strong",[t._v("hep.js")]),t._v(" in which basic parameters and extra parameters, such as description, price_currency, total_price, order_number, seller, customer, broker, signature, is encoded. Users click the New-Payment button, and redirect to NewPay. If NewPay is not installed, redirect to NewPay download page.")]),t._v(" "),a("li",[t._v("NewPay received the input parameters from schema, and retrieve the dapp profile from hep node and verify the DWeb app info.")]),t._v(" "),a("li",[t._v("NewPay authorizes payment.")]),t._v(" "),a("li",[t._v("NewPay jump back to DWeb app.")])]),t._v(" "),a("h4",{attrs:{id:"in-newpay-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#in-newpay-2"}},[t._v("#")]),t._v(" In NewPay")]),t._v(" "),a("ul",[a("li",[t._v("Users click the New-Payment button. DWeb app call the "),a("strong",[t._v("pay")]),t._v(" function by "),a("strong",[t._v("hep.js")]),t._v(" in which basic parameters and extra parameters, such as description, price_currency, total_price, order_number, seller, customer, broker, signature, is encoded.")]),t._v(" "),a("li",[t._v("NewPay received the input parameters from "),a("strong",[t._v("JS-bridge")]),t._v(", and retrieve the dapp profile from hep node and verify the DWeb app info.")]),t._v(" "),a("li",[t._v("NewPay authorizes payment.")]),t._v(" "),a("li",[t._v("NewPay jump back to DWeb app.")])]),t._v(" "),a("h3",{attrs:{id:"request-payment"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#request-payment"}},[t._v("#")]),t._v(" Request payment")]),t._v(" "),a("h4",{attrs:{id:"parameters-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#parameters-2"}},[t._v("#")]),t._v(" Parameters")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("Field")]),t._v(" "),a("th",[t._v("Type")]),t._v(" "),a("th",[t._v("Notes")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("uuid")]),t._v(" "),a("td",[t._v("string")]),t._v(" "),a("td",[t._v("The request uuid")])]),t._v(" "),a("tr",[a("td",[t._v("action")]),t._v(" "),a("td",[t._v("string")]),t._v(" "),a("td",[t._v('The value is "hep.pay.order"')])]),t._v(" "),a("tr",[a("td",[t._v("description")]),t._v(" "),a("td",[t._v("string")]),t._v(" "),a("td",[t._v("The order description")])]),t._v(" "),a("tr",[a("td",[t._v("price_currency")]),t._v(" "),a("td",[t._v("string")]),t._v(" "),a("td",[t._v("symbol of fiat or digital token, such as USD, RMB, NEW,BTC,ETH")])]),t._v(" "),a("tr",[a("td",[t._v("total_price")]),t._v(" "),a("td",[t._v("string")]),t._v(" "),a("td",[t._v("amount of fiat or digital token, unit is the minimum unit of given fiat or digital token")])]),t._v(" "),a("tr",[a("td",[t._v("order_number")]),t._v(" "),a("td",[t._v("string")]),t._v(" "),a("td",[t._v("The order number.")])]),t._v(" "),a("tr",[a("td",[t._v("seller")]),t._v(" "),a("td",[t._v("string")]),t._v(" "),a("td",[t._v("The seller's NewID")])]),t._v(" "),a("tr",[a("td",[t._v("customer")]),t._v(" "),a("td",[t._v("string")]),t._v(" "),a("td",[t._v("The customer's NewID")])]),t._v(" "),a("tr",[a("td",[t._v("broker")]),t._v(" "),a("td",[t._v("string")]),t._v(" "),a("td",[t._v("The broker's NewID. optional.")])]),t._v(" "),a("tr",[a("td",[t._v("sign_type")]),t._v(" "),a("td",[t._v("string")]),t._v(" "),a("td",[t._v("Signature Type,aka cryptographic algorithm")])]),t._v(" "),a("tr",[a("td",[t._v("signature")]),t._v(" "),a("td",[t._v("string")]),t._v(" "),a("td",[t._v('"0xf9559857bb89e106de1c97bf640a481ff77a6f51e9ba8e8487d43999af0369c4e89eecca9ae085c44506137bc12ef16b24347c6b93b04fee5ef8572818382138".')])])])]),t._v(" "),a("h4",{attrs:{id:"return-transaction-information-to-dapp-js-or-server"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#return-transaction-information-to-dapp-js-or-server"}},[t._v("#")]),t._v(" Return transaction information to DApp js or server")]),t._v(" "),a("ul",[a("li",[t._v("Request")])]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",{staticStyle:{"text-align":"center"}},[t._v("Field")]),t._v(" "),a("th",{staticStyle:{"text-align":"center"}},[t._v("Type")]),t._v(" "),a("th",{staticStyle:{"text-align":"center"}},[t._v("Desc")])])]),t._v(" "),a("tbody",[a("tr",[a("td",{staticStyle:{"text-align":"center"}},[t._v("signature")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("string")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("The pay's signature")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}},[t._v("sign_type")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("string")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("secp256r1, signature method name")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}},[t._v("uuid")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("string")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("uuid")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}},[t._v("nonce")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("string")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("nonce, random string")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}},[t._v("dapp_id")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("string")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("dapp id")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}},[t._v("ts")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("string")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("timestamp")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}},[t._v("txid")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("string")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("transaction id")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}},[t._v("order_number")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("string")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("order number")])])])]),t._v(" "),a("ul",[a("li",[t._v("Response\nsee "),a("RouterLink",{attrs:{to:"/interact-specification/DWeb-callback-error-messages.html"}},[t._v("Error Message")])],1)]),t._v(" "),a("h4",{attrs:{id:"example-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#example-2"}},[t._v("#")]),t._v(" Example")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v('{\n    "signature": "0x...",\n    "sign_type": "secp256r1",\n    "uuid": "xxx",\n    "nonce": "random string",\n    "dapp_id": "dapp id",\n    "ts": "timestamp",\n    "txid": "txid",\n    "order_number": "order number"\n}\n')])])]),a("h2",{attrs:{id:"proof"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#proof"}},[t._v("#")]),t._v(" Proof")]),t._v(" "),a("h3",{attrs:{id:"steps-3"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#steps-3"}},[t._v("#")]),t._v(" Steps")]),t._v(" "),a("h4",{attrs:{id:"in-desktop-browser-3"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#in-desktop-browser-3"}},[t._v("#")]),t._v(" In Desktop Browser")]),t._v(" "),a("ul",[a("li",[t._v("DWeb app generates the QR code by "),a("strong",[t._v("hep.js")]),t._v(" in which basic parameters and extra proof parameters is encoded.")]),t._v(" "),a("li",[t._v("NewPay Scan the QR code, and retrieve the dapp profile from hep node and verify the DWeb app info.")]),t._v(" "),a("li",[t._v("NewPay confirm proof.")]),t._v(" "),a("li",[t._v("NewPay jump back to DWeb app.")])]),t._v(" "),a("h4",{attrs:{id:"in-mobile-browser-3"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#in-mobile-browser-3"}},[t._v("#")]),t._v(" In Mobile Browser")]),t._v(" "),a("ul",[a("li",[t._v("DWeb app generates the redirect schema by "),a("strong",[t._v("hep.js")]),t._v(" in which basic parameters and extra proof parameters is encoded. Users click the New-Payment button, and redirect to NewPay. If NewPay is not installed, redirect to NewPay download page.")]),t._v(" "),a("li",[t._v("NewPay received the input parameters from schema, and retrieve the dapp profile from hep node and verify the DWeb app info.")]),t._v(" "),a("li",[t._v("NewPay confirm proof.")]),t._v(" "),a("li",[t._v("NewPay jump back to DWeb app.")])]),t._v(" "),a("h4",{attrs:{id:"in-newpay-3"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#in-newpay-3"}},[t._v("#")]),t._v(" In NewPay")]),t._v(" "),a("ul",[a("li",[t._v("Users click the New-Payment button. DWeb app call the "),a("strong",[t._v("pay")]),t._v(" function by "),a("strong",[t._v("hep.js")]),t._v(" in which basic parameters and extra proof parameters is encoded.")]),t._v(" "),a("li",[t._v("NewPay received the input parameters from "),a("strong",[t._v("JS-bridge")]),t._v(", and retrieve the dapp profile from hep node and verify the DWeb app info.")]),t._v(" "),a("li",[t._v("NewPay confirm proof.")]),t._v(" "),a("li",[t._v("NewPay jump back to DWeb app.")])]),t._v(" "),a("h3",{attrs:{id:"dweb-hep-node"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#dweb-hep-node"}},[t._v("#")]),t._v(" DWeb -> HEP node")]),t._v(" "),a("p",[t._v("see "),a("RouterLink",{attrs:{to:"/interact-specification/hep-node/REST-API.html"}},[t._v("proof_submitProof")])],1),t._v(" "),a("h3",{attrs:{id:"dweb-newpay-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#dweb-newpay-2"}},[t._v("#")]),t._v(" DWeb -> NewPay")]),t._v(" "),a("h4",{attrs:{id:"parameters-3"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#parameters-3"}},[t._v("#")]),t._v(" Parameters")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("Field")]),t._v(" "),a("th",[t._v("Type")]),t._v(" "),a("th",[t._v("Notes")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("uuid")]),t._v(" "),a("td",[t._v("string")]),t._v(" "),a("td",[t._v("The request uuid")])]),t._v(" "),a("tr",[a("td",[t._v("action")]),t._v(" "),a("td",[t._v("string")]),t._v(" "),a("td",[t._v('The value is "hep.proof.submit".')])]),t._v(" "),a("tr",[a("td",[t._v("proof_hash")]),t._v(" "),a("td",[t._v("string")]),t._v(" "),a("td",[t._v("The hash of proof which prefix is '0x'.")])]),t._v(" "),a("tr",[a("td",[t._v("sign_type")]),t._v(" "),a("td",[t._v("string")]),t._v(" "),a("td",[t._v("Signature Type,aka cryptographic algorithm.")])]),t._v(" "),a("tr",[a("td",[t._v("signature")]),t._v(" "),a("td",[t._v("string")]),t._v(" "),a("td",[t._v("The signature by DApp owner.")])])])]),t._v(" "),a("h4",{attrs:{id:"result-to-dweb-app-or-server"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#result-to-dweb-app-or-server"}},[t._v("#")]),t._v(" Result to DWeb app or server")]),t._v(" "),a("ul",[a("li",[t._v("Request")])]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",{staticStyle:{"text-align":"center"}},[t._v("Field")]),t._v(" "),a("th",{staticStyle:{"text-align":"center"}},[t._v("Type")]),t._v(" "),a("th",{staticStyle:{"text-align":"center"}},[t._v("Desc")])])]),t._v(" "),a("tbody",[a("tr",[a("td",{staticStyle:{"text-align":"center"}},[t._v("signature")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("string")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("The proof's signature")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}},[t._v("sign_type")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("string")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("secp256r1, signature method name")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}},[t._v("uuid")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("string")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("uuid")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}},[t._v("nonce")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("string")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("nonce, random string")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}},[t._v("dapp_id")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("string")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("dapp id")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}},[t._v("ts")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("string")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("timestamp")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}},[t._v("proof_hash")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("string")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("proof hash")])])])]),t._v(" "),a("ul",[a("li",[t._v("Response\nsee "),a("RouterLink",{attrs:{to:"/interact-specification/DWeb-callback-error-messages.html"}},[t._v("Error Message")])],1)]),t._v(" "),a("h4",{attrs:{id:"example-3"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#example-3"}},[t._v("#")]),t._v(" Example")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v('{\n    "signature": "0x...",\n    "sign_type": "secp256r1",\n    "uuid": "xxx",\n    "nonce": "random string",\n    "dapp_id": "dapp id",\n    "ts": "timestamp",\n    "proof_hash": "proof hash"\n}\n')])])]),a("h2",{attrs:{id:"sign-message"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#sign-message"}},[t._v("#")]),t._v(" Sign Message")]),t._v(" "),a("h3",{attrs:{id:"steps-4"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#steps-4"}},[t._v("#")]),t._v(" Steps")]),t._v(" "),a("h4",{attrs:{id:"in-mobile-browser-4"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#in-mobile-browser-4"}},[t._v("#")]),t._v(" In Mobile Browser")]),t._v(" "),a("ul",[a("li",[t._v("DWeb app generates the redirect schema by "),a("strong",[t._v("hep.js")]),t._v(" in which basic parameters and extra parameters. Users click any button, and redirect to NewPay. If NewPay is not installed, redirect to NewPay download page.")]),t._v(" "),a("li",[t._v("NewPay received the input parameters from schema, and retrieve the dapp profile from hep node and verify the DWeb app info.")]),t._v(" "),a("li",[t._v("NewPay sign message.")]),t._v(" "),a("li",[t._v("NewPay sends signature back to the API of DWeb app.")])]),t._v(" "),a("h4",{attrs:{id:"in-newpay-4"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#in-newpay-4"}},[t._v("#")]),t._v(" In NewPay")]),t._v(" "),a("ul",[a("li",[t._v("Users click any button. DWeb app call the "),a("strong",[t._v("signMessage")]),t._v(" function by "),a("strong",[t._v("hep.js")]),t._v(" in which basic parameters and extra parameters.")]),t._v(" "),a("li",[t._v("NewPay received the input parameters from "),a("strong",[t._v("JS-bridge")]),t._v(", and retrieve the dapp profile from hep node and verify the DWeb app info.")]),t._v(" "),a("li",[t._v("NewPay sign message.")]),t._v(" "),a("li",[t._v("NewPay sends signature back to the API of DWeb app.")])]),t._v(" "),a("h3",{attrs:{id:"dweb-newpay-3"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#dweb-newpay-3"}},[t._v("#")]),t._v(" DWeb -> NewPay")]),t._v(" "),a("h4",{attrs:{id:"parameters-4"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#parameters-4"}},[t._v("#")]),t._v(" Parameters")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("Field")]),t._v(" "),a("th",[t._v("Type")]),t._v(" "),a("th",[t._v("Notes")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("action")]),t._v(" "),a("td",[t._v("string")]),t._v(" "),a("td",[t._v('The value is "hep.sign.message"')])]),t._v(" "),a("tr",[a("td",[t._v("message")]),t._v(" "),a("td",[t._v("string")]),t._v(" "),a("td",[t._v("The message to be signed")])]),t._v(" "),a("tr",[a("td",[t._v("sign_type")]),t._v(" "),a("td",[t._v("string")]),t._v(" "),a("td",[t._v("Signature Type,aka cryptographic algorithm")])]),t._v(" "),a("tr",[a("td",[t._v("signature")]),t._v(" "),a("td",[t._v("string")]),t._v(" "),a("td",[t._v("signature hex string by DApp owner.")])])])]),t._v(" "),a("h3",{attrs:{id:"sign-the-message"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#sign-the-message"}},[t._v("#")]),t._v(" Sign the message")]),t._v(" "),a("h3",{attrs:{id:"newpay-return-to-dweb-app-or-server-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#newpay-return-to-dweb-app-or-server-2"}},[t._v("#")]),t._v(" NewPay return to DWeb app or server")]),t._v(" "),a("h4",{attrs:{id:"returns"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#returns"}},[t._v("#")]),t._v(" Returns")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("Field")]),t._v(" "),a("th",[t._v("Type")]),t._v(" "),a("th",[t._v("Notes")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("message")]),t._v(" "),a("td",[t._v("string")]),t._v(" "),a("td")]),t._v(" "),a("tr",[a("td",[t._v("sign_type")]),t._v(" "),a("td",[t._v("string")]),t._v(" "),a("td")]),t._v(" "),a("tr",[a("td",[t._v("signed_message")]),t._v(" "),a("td",[t._v("string")]),t._v(" "),a("td")])])]),t._v(" "),a("h4",{attrs:{id:"example-4"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#example-4"}},[t._v("#")]),t._v(" Example")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v('{\n\t"status_code": 200,\n\t"result": {\n\t\t"signed_message": "0x6e6577746f6e70726f6a656374",\n\t\t"sign_type": "secp256r1",\n\t\t"message": "86"\n\t}\n}\n')])])]),a("h2",{attrs:{id:"sign-transaction"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#sign-transaction"}},[t._v("#")]),t._v(" Sign Transaction")]),t._v(" "),a("h3",{attrs:{id:"steps-5"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#steps-5"}},[t._v("#")]),t._v(" Steps")]),t._v(" "),a("h4",{attrs:{id:"in-mobile-browser-5"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#in-mobile-browser-5"}},[t._v("#")]),t._v(" In Mobile Browser")]),t._v(" "),a("ul",[a("li",[t._v("DWeb app generates the redirect schema by "),a("strong",[t._v("hep.js")]),t._v(" in which basic parameters and extra parameters. Users click any button, and redirect to NewPay. If NewPay is not installed, redirect to NewPay download page.")]),t._v(" "),a("li",[t._v("NewPay received the input parameters from schema, and retrieve the dapp profile from hep node and verify the DWeb app info.")]),t._v(" "),a("li",[t._v("NewPay sign the transaction.")]),t._v(" "),a("li",[t._v("NewPay sends signed data and signature back to the API of DWeb app.")])]),t._v(" "),a("h4",{attrs:{id:"in-newpay-5"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#in-newpay-5"}},[t._v("#")]),t._v(" In NewPay")]),t._v(" "),a("ul",[a("li",[t._v("Users click any button. DWeb app call the "),a("strong",[t._v("signTransaction")]),t._v(" function by "),a("strong",[t._v("hep.js")]),t._v(" in which basic parameters and extra parameters.")]),t._v(" "),a("li",[t._v("NewPay received the input parameters from "),a("strong",[t._v("JS-bridge")]),t._v(", and retrieve the dapp profile from hep node and verify the DWeb app info.")]),t._v(" "),a("li",[t._v("NewPay sign the transaction.")]),t._v(" "),a("li",[t._v("NewPay sends signed data and signature back to the API of DWeb app.")])]),t._v(" "),a("h3",{attrs:{id:"dweb-newpay-4"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#dweb-newpay-4"}},[t._v("#")]),t._v(" DWeb -> NewPay")]),t._v(" "),a("h4",{attrs:{id:"parameters-5"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#parameters-5"}},[t._v("#")]),t._v(" Parameters")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("Field")]),t._v(" "),a("th",[t._v("Type")]),t._v(" "),a("th",[t._v("Notes")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("action")]),t._v(" "),a("td",[t._v("string")]),t._v(" "),a("td",[t._v('The value is "hep.sign.transaction"')])]),t._v(" "),a("tr",[a("td",[t._v("amount")]),t._v(" "),a("td",[t._v("string")]),t._v(" "),a("td",[t._v("The amount of transaction")])]),t._v(" "),a("tr",[a("td",[t._v("from")]),t._v(" "),a("td",[t._v("string")]),t._v(" "),a("td",[t._v("The from address of the transaction")])]),t._v(" "),a("tr",[a("td",[t._v("to")]),t._v(" "),a("td",[t._v("string")]),t._v(" "),a("td",[t._v("The to address of the transaction")])]),t._v(" "),a("tr",[a("td",[t._v("transaction_count")]),t._v(" "),a("td",[t._v("string")]),t._v(" "),a("td",[t._v("The nonce of the transaction")])]),t._v(" "),a("tr",[a("td",[t._v("gas_price")]),t._v(" "),a("td",[t._v("string")]),t._v(" "),a("td",[t._v("The gas_price of the transaction")])]),t._v(" "),a("tr",[a("td",[t._v("gas_limit")]),t._v(" "),a("td",[t._v("string")]),t._v(" "),a("td",[t._v("The gas_limit of the transaction")])]),t._v(" "),a("tr",[a("td",[t._v("data")]),t._v(" "),a("td",[t._v("string")]),t._v(" "),a("td",[t._v("The data of the transaction and should be a hex string")])]),t._v(" "),a("tr",[a("td",[t._v("sign_type")]),t._v(" "),a("td",[t._v("string")]),t._v(" "),a("td",[t._v("Signature Type,aka cryptographic algorithm")])]),t._v(" "),a("tr",[a("td",[t._v("signature")]),t._v(" "),a("td",[t._v("string")]),t._v(" "),a("td",[t._v("signature hex string by DApp owner.")])])])]),t._v(" "),a("h3",{attrs:{id:"sign-the-transaction"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#sign-the-transaction"}},[t._v("#")]),t._v(" Sign the transaction")]),t._v(" "),a("h3",{attrs:{id:"newpay-return-to-dweb-app-or-server-3"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#newpay-return-to-dweb-app-or-server-3"}},[t._v("#")]),t._v(" NewPay return to DWeb app or server")]),t._v(" "),a("h4",{attrs:{id:"returns-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#returns-2"}},[t._v("#")]),t._v(" Returns")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("Field")]),t._v(" "),a("th",[t._v("Type")]),t._v(" "),a("th",[t._v("Notes")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("signed_transaction")]),t._v(" "),a("td",[t._v("string")]),t._v(" "),a("td")])])]),t._v(" "),a("h4",{attrs:{id:"example-5"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#example-5"}},[t._v("#")]),t._v(" Example")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v('{\n\t"status_code": 200,\n\t"result": {\n\t\t"signed_transaction": "0x6e6577746f6e70726f6a656374"\n\t}\n}\n')])])])])}),[],!1,null,null,null);e.default=s.exports}}]);