(window.webpackJsonp=window.webpackJsonp||[]).push([[46],{299:function(t,e,a){"use strict";a.r(e);var n=a(2),i=Object(n.a)({},(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h2",{attrs:{id:"_1-md5签名规则"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-md5签名规则"}},[t._v("#")]),t._v(" 1. MD5签名规则")]),t._v(" "),a("ol",[a("li",[t._v("在所有请求参数中，所有参数都需要拼接进行MD5签名，获取sign的值，拼接参数sign进行请求。")]),t._v(" "),a("li",[t._v("在拼接过程中，需要将所有参数的key按字典排序（a-z），然后用“&”拼接键值对，最后拼接access_secret.")])]),t._v(" "),a("h2",{attrs:{id:"_2-公共参数"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-公共参数"}},[t._v("#")]),t._v(" 2. 公共参数")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",{staticStyle:{"text-align":"center"}},[t._v("params")]),t._v(" "),a("th",{staticStyle:{"text-align":"center"}},[t._v("type")]),t._v(" "),a("th",{staticStyle:{"text-align":"center"}},[t._v("value")]),t._v(" "),a("th",{staticStyle:{"text-align":"center"}},[t._v("desc")])])]),t._v(" "),a("tbody",[a("tr",[a("td",{staticStyle:{"text-align":"center"}},[t._v("os")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("String")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("'android'")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("平台信息")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}},[t._v("version")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("String")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("'2'")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("版本号（version_code）")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}},[t._v("device_id")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("String")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("LKMFA23LKASDF")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("设备唯一编码 IMEI")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}},[t._v("device_info")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("String")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("vivo-Y550A-4.0.1")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("设备信息")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}},[t._v("app_key")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("String")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("asldkfalskdsajf")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("key，可用作访问限制")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}},[t._v("language")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("String")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("zh")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("语言信息")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}},[t._v("timezone")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("String")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("UTC")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("时区信息")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}},[t._v("channel")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("String")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("www")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("渠道信息")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}},[t._v("nonce")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("String")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("'asdf134'")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("唯一随机数")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}},[t._v("timestamp")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("String")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("1539582627.158863")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("时间戳(单位为秒)")])])])]),t._v(" "),a("ol",{attrs:{start:"3"}},[a("li")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("signContent:\n> app_key=d41d8cd98f00b204e9800998ecf8427e&name=test&os=android&\nversion=175d78bdb89dd0baeaeacdbef66ba4240\n> sign result :\nb1396e2e83478a426a31fe24e0de363e\n> post data:\n{app_key=d41d8cd98f00b204e9800998ecf8427e, os=android, name=test, sign=b1396e2e83478a426a31fe24e0de363e, version=1}\n")])])]),a("h2",{attrs:{id:"_3-error-code-列表"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-error-code-列表"}},[t._v("#")]),t._v(" 3. ERROR_CODE 列表")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",{staticStyle:{"text-align":"center"}},[t._v("错误码")]),t._v(" "),a("th",{staticStyle:{"text-align":"center"}},[t._v("描述")]),t._v(" "),a("th",{staticStyle:{"text-align":"center"}},[t._v("示例")])])]),t._v(" "),a("tbody",[a("tr",[a("td",{staticStyle:{"text-align":"center"}},[t._v("1")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("成功")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[a("code",[t._v('{ "error_code" : 1,"result":{} }')])])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}},[t._v("0")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("失败")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[a("code",[t._v('{ "error_code" : 0,"result":{},"error_message":"permission denied" } ')])])])])]),t._v(" "),a("h2",{attrs:{id:"_4-示例代码"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-示例代码"}},[t._v("#")]),t._v(" 4.示例代码")]),t._v(" "),a("h3",{attrs:{id:"_4-1-java-语言"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-1-java-语言"}},[t._v("#")]),t._v(" 4.1 java 语言")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v('//method for signature\npublic void sign(Map<String, String> params) {\n        if (params != null) {\n            String[] keys = params.keySet().toArray(new String[0]);\n            Arrays.sort(keys);\n            ArrayList<String> signPair = new ArrayList<String>();\n            for (String key : keys) {\n                signPair.add(key + "=" + params.get(key));\n            }\n            String signContent = StringUtils.join(signPair, "&") + APP_SECRET;\n            MessageDigest messageDigest;\n            try {\n                messageDigest = MessageDigest.getInstance("MD5");\n                messageDigest.reset();\n                messageDigest.update(signContent.getBytes("UTF8"));\n                final byte[] resultByte = messageDigest.digest();\n                final String result = new String(Hex.encodeHex(resultByte));\n                params.put(“sign”, result);\n            } catch (Exception e) {\n                e.printStackTrace();\n            }\n        }\n    }\n}\n')])])]),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v('private String APP_KEY = "93ecc2e817f27e9e81b5363229e231dd";\nprivate String APP_SECRET = "bfe65f6d29c397e7efe55d5f25015ed5";\nprivate String url = "http://[API Domain]/api/v3/payment/withdraw/success/";\n\n//parameter for post request\nMap<String,String> map = new HashMap<>();\nmap.put("country_code","86");\nmap.put("cellphone","17612321557");\nmap.put("coins","10000");\nmap.put("access_key",APP_KEY);\nsign(this,map)；\n//netword request\nOkHttpUtils\n    .post()\n    .url(url)\n    .params(map)\n    .build()\n    .execute(new StringCallback() {\n    @Override\n    public void onError(okhttp3.Call call, Exception e, int i) {\n          //TODO error\n    }\n    @Override\n     public void onResponse(String s, int i) {\n          //TODO success\n    }\n   });\n')])])])])}),[],!1,null,null,null);e.default=i.exports}}]);