(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{259:function(e,t,s){"use strict";s.r(t);var a=s(2),r=function(e){e.options.__data__block__={mermaid_382ee168:"sequenceDiagram;\n    participant User;\n    participant DWEB;\n\tparticipant NewPay;\n\tparticipant HEP Node;\n    User->>DWEB: Click Login;\n    DWEB->>HEP Node: Session Request;\n    HEP Node->>HEP Node: Store Session and Generate UUID\n    HEP Node->>DWEB: UUID;\n    DWEB->>NewPay: QRCode (UUID)\n    NewPay->>HEP Node: Query UUID\n    HEP Node->> NewPay: DWEB info, loginUrl;\n    NewPay->>DWEB:Profile Info, Signature;\n    DWEB->>User:verify signature and Login success;\n",mermaid_64a570e0:"sequenceDiagram;\n    participant User;\n    participant DWEB;\n\tparticipant NewPay;\n\tparticipant HEP Node;\n\tUser->>DWEB:Click pay with NEW;\n\tDWEB->>HEP Node: Session Request with AppId, OrderValue;\n    HEP Node->>HEP Node: Store Session and Generate UUID\n    HEP Node->>DWEB: UUID;\n\tDWEB->>NewPay:QRCode(UUID);\n\tNewPay->>HEP Node:Query Order by UUID;\n\tHEP Node->>NewPay: OrderValue;\n\tNewPay->>DWEB:Pay and send txid;\n\tDWEB->>User:verify tx and Pay success;\n",mermaid_64a5689c:"sequenceDiagram;\n\tparticipant User;\n\tparticipant DWEB;\n\tparticipant NewPay;\n\tparticipant HEP Node;\n\tparticipant NF API;\n\tUser->>DWEB:Click place order;\n\tDWEB->>HEP Node:AppId, OrderInfo;\n\tHEP Node->>NF API:Query Appid can place order;\n\tNF API->>HEP Node:Place Order Status: true;\n\tHEP Node->>HEP Node: Store Session and Generate UUID\n    HEP Node->>DWEB: UUID;\n    DWEB->>NewPay: QRCode (UUID)\n    NewPay->>HEP Node: Query UUID\n\tHEP Node->>NewPay:Order Info;\n\tNewPay->>DWEB:sign hash, txid, order hash;\n\tDWEB->>User:Place Order Success;\n\tNewPay->>HEP Node:sign hash, txid;\n\tHEP Node->>NF API:hash, txid;\n\tNF API->>HEP Node:Query Order;\n\tHEP Node->>NF API:Order;\n\tNF API->>NF API: Calculate NF;\n"}},n=Object(a.a)({},(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[s("h1",{attrs:{id:"decentralized-web"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#decentralized-web"}},[e._v("#")]),e._v(" Decentralized Web")]),e._v(" "),s("p",[e._v("The HEP SDK provides a Javascript API for websites to integrate with NewID for user login and payments")]),e._v(" "),s("h2",{attrs:{id:"user-account-creation-and-login"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#user-account-creation-and-login"}},[e._v("#")]),e._v(" User Account Creation and Login")]),e._v(" "),s("h3",{attrs:{id:"preconditions"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#preconditions"}},[e._v("#")]),e._v(" Preconditions")]),e._v(" "),s("ul",[s("li",[e._v("User has NewPay installed on their device and has set a NewID")]),e._v(" "),s("li",[e._v("The Dapp or website requesting login has [registered on Newton's platform]")])]),e._v(" "),s("Mermaid",{attrs:{id:"mermaid_382ee168",graph:e.$dataBlock.mermaid_382ee168}}),s("h3",{attrs:{id:"website-requests-user-login"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#website-requests-user-login"}},[e._v("#")]),e._v(" Website requests user login")]),e._v(" "),s("ol",[s("li",[e._v("Website displays "),s("em",[e._v("Login with NewID")]),e._v(" button")]),e._v(" "),s("li",[e._v("User clicks or taps button")]),e._v(" "),s("li",[e._v("Website sends session request to [HEP Node]")]),e._v(" "),s("li",[e._v("[HEP Node] stores session information and sends [UUID] back to website")]),e._v(" "),s("li",[e._v("If on mobile, user is redirected to NewPay bringing [UUID]. Otherwise, website pops up a QR code for user to scan, containing [UUID]")])]),e._v(" "),s("ul",[s("li",[e._v("See [newpay.web.login.requestAccess]")])]),e._v(" "),s("h3",{attrs:{id:"user-authorizes-website-on-newpay"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#user-authorizes-website-on-newpay"}},[e._v("#")]),e._v(" User authorizes website on NewPay")]),e._v(" "),s("ol",[s("li",[e._v("NewPay gets [UUID] from QR code or schema url")]),e._v(" "),s("li",[e._v("NewPay sends [UUID] to [HEP Node]")]),e._v(" "),s("li",[e._v("[HEP Node] uses [UUID] to query session information and website information that was registered in database")]),e._v(" "),s("li",[e._v("[HEP Node] sends information back to NewPay")]),e._v(" "),s("li",[e._v("NewPay opens and prompts user to authorize the website login based on information gathered from [HEP Node]")]),e._v(" "),s("li",[e._v("User confirms login")]),e._v(" "),s("li",[e._v("User sends login request to website, including NewID, personal information, [message] and [signature]")])]),e._v(" "),s("h2",{attrs:{id:"payments"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#payments"}},[e._v("#")]),e._v(" Payments")]),e._v(" "),s("Mermaid",{attrs:{id:"mermaid_64a570e0",graph:e.$dataBlock.mermaid_64a570e0}}),s("h3",{attrs:{id:"website-requests-user-payment"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#website-requests-user-payment"}},[e._v("#")]),e._v(" Website requests user payment")]),e._v(" "),s("ol",[s("li",[e._v("Website displays "),s("em",[e._v("Pay with NewPay")]),e._v(" button")]),e._v(" "),s("li",[e._v("User clicks or taps button")]),e._v(" "),s("li",[e._v("Website sends session request to [HEP Node] including [order information]")]),e._v(" "),s("li",[e._v("[HEP Node] sends [UUID] back to website")]),e._v(" "),s("li",[e._v("If on mobile, user is redirected to NewPay. Otherwise, website pops up a QR code for user to scan, containing [UUID]")])]),e._v(" "),s("ul",[s("li",[e._v("See [newpay.web.payment.requestAccess]")])]),e._v(" "),s("h3",{attrs:{id:"user-authorizes-payment-on-newpay"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#user-authorizes-payment-on-newpay"}},[e._v("#")]),e._v(" User authorizes payment on NewPay")]),e._v(" "),s("p",[e._v("Update:")]),e._v(" "),s("ol",[s("li",[e._v("NewPay gets [UUID] through QR code or scheme url")]),e._v(" "),s("li",[e._v("NewPay sends [UUID] to [HEP Node]")]),e._v(" "),s("li",[e._v("HEP Node uses [UUID] to request website information that was registered in database and order information, and sends that information back to NewPay")]),e._v(" "),s("li",[e._v("NewPay opens and prompts user to authorize the payment based on information gathered from HEP Node")]),e._v(" "),s("li",[e._v("User confirms payment")]),e._v(" "),s("li",[e._v("User's NewID is sent to website, with [message] and [signature]")]),e._v(" "),s("li",[e._v("Payment receipt is sent to user and website")]),e._v(" "),s("li",[e._v("User is redirected back to website")])]),e._v(" "),s("p",[e._v("Old:")]),e._v(" "),s("ol",[s("li",[e._v("NewPay gets public key of website through [signature] and [message] parameters")]),e._v(" "),s("li",[e._v("NewPay sends public key to [HEP Node]")]),e._v(" "),s("li",[e._v("HEP Node uses public key to request website information that was registered in database and order information, and sends that information back to NewPay")]),e._v(" "),s("li",[e._v("NewPay opens and prompts user to authorize the payment based on information gathered from HEP Node")]),e._v(" "),s("li",[e._v("User confirms payment")]),e._v(" "),s("li",[e._v("User's NewID is sent to website, with [message] and [signature]")]),e._v(" "),s("li",[e._v("Payment receipt is sent to user and website")]),e._v(" "),s("li",[e._v("User is redirected back to website")])]),e._v(" "),s("h2",{attrs:{id:"placeorder"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#placeorder"}},[e._v("#")]),e._v(" PlaceOrder")]),e._v(" "),s("Mermaid",{attrs:{id:"mermaid_64a5689c",graph:e.$dataBlock.mermaid_64a5689c}}),s("h3",{attrs:{id:"website-requests-user-place-order"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#website-requests-user-place-order"}},[e._v("#")]),e._v(" Website requests user place order")]),e._v(" "),s("p",[e._v("Update")]),e._v(" "),s("ol",[s("li",[e._v("Website displays "),s("em",[e._v("Place Order")]),e._v(" button")]),e._v(" "),s("li",[e._v("User clicks or taps button")]),e._v(" "),s("li",[e._v("If on mobile, user is redirected to NewPay. Otherwise, website pops up a QR code for user to scan, containing "),s("strong",[e._v("UUID")])])]),e._v(" "),s("p",[e._v("Old")]),e._v(" "),s("ol",[s("li",[e._v("Website displays "),s("em",[e._v("Place Order")]),e._v(" button")]),e._v(" "),s("li",[e._v("User clicks or taps button")]),e._v(" "),s("li",[e._v("If on mobile, user is redirected to NewPay. Otherwise, website pops up a QR code for user to scan, containing "),s("strong",[e._v("order hash")]),e._v(", "),s("strong",[e._v("AppID")]),e._v(" and "),s("strong",[e._v("Action Type")])])]),e._v(" "),s("h3",{attrs:{id:"user-authorizes-place-order-on-newpay"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#user-authorizes-place-order-on-newpay"}},[e._v("#")]),e._v(" User authorizes place order on NewPay")]),e._v(" "),s("p",[e._v("Update")]),e._v(" "),s("ol",[s("li",[e._v("DWeb posts order info to HEP-Node;")]),e._v(" "),s("li",[e._v("HEP-Node verifies order info and query the DWEB's status, which can place order or not,if true, return the the order hash, else return false.")]),e._v(" "),s("li",[e._v("HEP-Node stores the session information including "),s("strong",[e._v("order hash")]),e._v(", "),s("strong",[e._v("AppID")]),e._v(" and "),s("strong",[e._v("Action Type")])]),e._v(" "),s("li",[e._v("HEP-Node sends the UUID of the session to DWeb")]),e._v(" "),s("li",[e._v("DWeb shows QRCode for user to scan, containing "),s("strong",[e._v("UUID")])]),e._v(" "),s("li",[e._v("Newpay scan the QRCode and sign the order hash, then return the txid to DWeb and HEP-Node.")]),e._v(" "),s("li",[e._v("NF-API get the order info by hash and calculate the NF.")])]),e._v(" "),s("p",[e._v("Old")]),e._v(" "),s("ol",[s("li",[e._v("DWeb Post order info to HEP-Node;")]),e._v(" "),s("li",[e._v("HEP-Node verify order info and query the DWEB's status, which can place order or not,if true, return the the order hash, else return false.")]),e._v(" "),s("li",[e._v("Show QRCode for user to scan, containing "),s("strong",[e._v("order hash")]),e._v(", "),s("strong",[e._v("AppId")]),e._v(" and "),s("strong",[e._v("Action Type")]),e._v(".")]),e._v(" "),s("li",[e._v("Newpay scan the QRCode and sign the order hash, then return the txid to DWeb and HEP-Node.")]),e._v(" "),s("li",[e._v("NF-API get the order info by hash and calculate the NF.")])])],1)}),[],!1,null,null,null);"function"==typeof r&&r(n);t.default=n.exports}}]);